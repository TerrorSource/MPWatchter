{% extends "base.html" %}

{% block title %}Configuratie Â· MPWatcher{% endblock %}

{% block content %}
<section class="card">
  <div class="card-header">
    <div>
      <div class="card-kicker">Instellingen</div>
      <div class="card-title">MPWatcher configuratie</div>
      <p class="card-description">
        Stel hier timers, slaapstand, locatie en Telegram-meldingen in.
      </p>
    </div>
  </div>

  <div class="page-grid">
    <!-- LINKER KOLOM -->
    <section class="card">
      <div class="card-header">
        <div>
          <div class="card-kicker">Automatisering</div>
          <div class="card-title">Timer, slaapstand & locatie</div>
        </div>
      </div>

      <form method="post" action="{{ url_for('config_save_timer') }}" class="form-grid-1">
        <div class="form-field">
          <label class="form-label">Standaard interval (minuten)</label>
          <input class="input" type="number" min="1"
                 name="default_interval_minutes"
                 value="{{ settings.default_interval_minutes }}">
        </div>

        <div class="form-field">
          <label class="form-label">Standaard limiet per zoekopdracht</label>
          <input class="input" type="number" min="1" max="20"
                 name="default_limit_per_run"
                 value="{{ settings.default_limit_per_run }}">
        </div>

        <div class="divider"></div>

        <div class="form-field">
          <label class="form-label">Slaapstand</label>
          <select class="select" name="sleep_mode">
            <option value="nee" {% if settings.sleep_mode == "nee" %}selected{% endif %}>Uit</option>
            <option value="ja" {% if settings.sleep_mode == "ja" %}selected{% endif %}>Aan</option>
          </select>
        </div>

        <div class="form-grid">
          <div class="form-field">
            <label class="form-label">Slaap start</label>
            <input class="input" type="time"
                   name="sleep_start"
                   value="{{ settings.sleep_start }}">
          </div>
          <div class="form-field">
            <label class="form-label">Slaap einde</label>
            <input class="input" type="time"
                   name="sleep_end"
                   value="{{ settings.sleep_end }}">
          </div>
        </div>

        <div class="divider"></div>

        <div class="form-field">
          <label class="form-label">Postcode</label>
          <input class="input" type="text"
                 name="postcode"
                 placeholder="1234AB"
                 value="{{ settings.postcode }}">
        </div>

        <div class="form-field">
          <label class="form-label">Straal</label>
          <select class="select" name="radius_km">
            {% for v in ["3","5","10","15","25","50","75","alle"] %}
              <option value="{{ v }}" {% if settings.radius_km == v %}selected{% endif %}>
                {{ v }}{% if v != "alle" %} km{% endif %}
              </option>
            {% endfor %}
          </select>
        </div>

        <div class="btn-group">
          <button class="btn btn-primary" type="submit">Opslaan</button>
        </div>
      </form>
    </section>

    <!-- RECHTER KOLOM -->
    <section class="card">
      <div class="card-header">
        <div>
          <div class="card-kicker">Notificaties</div>
          <div class="card-title">Telegram instellingen</div>
        </div>
      </div>

      <form method="post" action="{{ url_for('config_save_telegram') }}" class="form-grid-1">
        <div class="form-field">
          <label class="form-label">Bot token</label>
          <input class="input" type="text"
                 name="telegram_bot_id"
                 value="{{ settings.telegram_bot_id }}">
        </div>

        <div class="form-field">
          <label class="form-label">Chat ID</label>
          <input class="input" type="text"
                 name="telegram_chat_id"
                 value="{{ settings.telegram_chat_id }}">
        </div>

        <div class="form-field">
          <label class="form-label">Handmatig zoeken naar Telegram</label>
          <select class="select" name="manual_telegram">
            <option value="nee" {% if settings.manual_telegram == "nee" %}selected{% endif %}>Nee</option>
            <option value="ja" {% if settings.manual_telegram == "ja" %}selected{% endif %}>Ja</option>
          </select>
        </div>

        <div class="btn-group">
          <button class="btn btn-primary" type="submit">Opslaan</button>
        </div>
      </form>

      <form method="post" action="{{ url_for('config_test_telegram') }}" style="margin-top:10px;">
        <button class="btn btn-soft" type="submit">Test Telegram</button>
      </form>
    </section>
  </div>
</section>
{% endblock %}
